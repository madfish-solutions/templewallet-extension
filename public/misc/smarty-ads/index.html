<!--
  This page is not to be packaged with extension, but hosted remotely. (i.e. @ https://templewallet.com/smarty-ads)
  Serve locally by:
  ```bash
  yarn global add http-server
  yarn serve-smarty-ads
  ```
-->

<!DOCTYPE html>
<html lang="">

<head>
  <meta charset="utf-8" />
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" /> -->
  <title>Temple Wallet | Smarty ads</title>

  <!-- SCRIPTS -->

  <!-- <script src="./index.js"></script> -->

  <style>
    body {
      margin: 0;
    }
  </style>
</head>

<body>
  <div id="ad-slot">
    <!-- Place for ad to be inserted into -->
  </div>

  <script>
    const usp = new URLSearchParams(window.location.search);
    const placementId = usp.get('placementId');
    const width = usp.get('width');
    const height = usp.get('height');

    function fetchAd(placementId, width, height) {
      const resType = 'json'; // 'json'(def) | 'html' | 'js'
      const gdpr_consent = 'BOSSotLOSSotLAPABAENBc-AAAAgR7_______9______9uz_Gv_v_f__33e8__9v_l_7_-___u_-33d4-_1vX99yfm1-7ftr3t';
      const gpp = 'DBACNYA~CPXxRfAPXxRfAAfKABENB-CgAAAAAAAAAAYgAAAAAAAA~1YNN';

      return fetch(
        `https://n1.smartyads.com/?c=b&m=api&res=${resType}&gdpr=1&gdpr_consent=${gdpr_consent}&gpp=${gpp}&gpp_sid=2&us_privacy=1YNN&coppa=0&page=1&placementId=${placementId}&domain=templewallet.com&ua=${encodeURIComponent(navigator.userAgent)}&lmt=0&dnt=0&ad_width=${width}&ad_height=${height}`
      );
    }

    (async () => {
      const response = await fetchAd(placementId, width, height);

      const data = await response.json();

      console.log('Data:', data);

      document.getElementById('ad-slot').innerHTML = data.adm;
    })();
  </script>
</body>

</html>
